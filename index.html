<html>
    <head>

            <!-- #region CSS-->
            <link rel="stylesheet" type="text/css" href="css/scratchit.css">
            <!-- #endregion CSS-->

            <!-- #region JAVASCRIPT-->
            <script src="js/jquery.js"></script>
            <!-- #endregion JAVASCRIPT -->

            <!-- #region PLUGINS-->
            <script src="js/scratchit.js"></script>
            <!-- #endregion PLUGINS -->
    </head>
    <body>
        <div class="scratchit">
            <img src="img/Dirty_sneaker.jpg" class="dirty" width="1000" height="416">
            <img src="img/Clean_sneaker.jpg" width="1000" height="416">
            <canvas id="scratchCanvas" width="1000" height="416" ></canvas>
        </div>
        <script>
            var canvas = document.getElementById("scratchCanvas");
            $(document).ready(
            function() {
                //Validate if cookie is set 
                if(true) //!alreadyCleaning()
                {
                    var $scratchit = $('.scratchit').scratchIt();
                    
                    //set cookie
                    setCookie();
                }
                else
                {
                    $("img.dirty").remove();
                }
            });
            function setCookie()
            {
                var midnight = new Date();
                midnight.setHours(23,59,59,0);
                document.cookie = "cleaned=1;expires=" + midnight + ";path=/";
            }
            function alreadyCleaning()
            {
                var cleaned = getCookie("cleaned");
                if(cleaned != "")
                {
                    return true;
                }
                return false;
            }

            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                    }
                }
                return "";
            }


            //Preventing scrolling when touching the canvas
            // Prevent scrolling when touching the canvas
            document.body.addEventListener("touchstart", function (e) {
            if (e.target == canvas) {
                e.preventDefault();
            }
            }, false);
            document.body.addEventListener("touchend", function (e) {
            if (e.target == canvas) {
                e.preventDefault();
            }
            }, false);
            document.body.addEventListener("touchmove", function (e) {
            if (e.target == canvas) {
                e.preventDefault();
            }
            }, false);

           </script>
    </body>
</html>